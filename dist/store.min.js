/*! storejs v1.0.8 | MIT (c) 2016 kenny wang <wowohoo@qq.com> | https://github.com/jaywcjlove/store.js */
!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.store=f()}}(function(){function isJSON(obj){return"object"==typeof obj&&Object.prototype.toString.call(obj).toLowerCase()&&!obj.length}function stringify(val){return void 0===val||"function"==typeof val?val+"":JSON.stringify(val)}function deserialize(value){if("string"==typeof value)try{return JSON.parse(value)}catch(e){return value||void 0}}function isFunction(value){return"[object Function]"==={}.toString.call(value)}function isString(obj){return"string"==typeof obj}function isArray(value){return value instanceof Array}if(window.localStorage){var store,_api,storage=window.localStorage,even_storage=function(){};_api={set:function(key,val){return void 0===val?this.remove(key):(storage.setItem(key,stringify(val)),even_storage("set",key,val),this)},setAll:function(data){var changed,val;for(var key in data)val=data[key],this.set(key,val)!==val&&(changed=!0);return this},get:function(key){return deserialize(storage.getItem(key))},getAll:function(){var ret={};return this.forEach(function(key,val){ret[key]=val}),ret},clear:function(){return this.forEach(function(key,val){even_storage("clear",key,val)}),storage.clear(),this},remove:function(key){var val=this.get(key);return storage.removeItem(key),even_storage("remove",key,val),val},has:function(key){return storage.hasOwnProperty(key)},keys:function(){var d=[];return this.forEach(function(k,list){d.push(k)}),d},size:function(){return this.keys().length},forEach:function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);if(callback(key,this.get(key))===!1)break}return this},onStorage:function(cb){return cb&&isFunction(cb)&&(even_storage=cb),this}},store=function(key,data){var argm=arguments,dt=null,_store=function(key,data){if(!isFunction(data))return isJSON(key)?store.setAll(key):0===argm.length?store.getAll():data===!1?store.remove(key):void 0!==data?store.set(key,data):key?store.get(key):store.setAll(key,data);if(isString(key))return dt=data(store.get(key)),dt?store.set(key,dt):void 0;if(isArray(key))for(var a in key)dt=data(store.get(key[a])),dt&&store.set(key[a],dt)};return _store(key,data)};for(var a in _api)store[a]=_api[a];return store}});

