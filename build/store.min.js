(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else if(typeof exports==="object"){module.exports=b()}else{a.store=b()}})(this,function(a,b){var c=window.localStorage,d={storageAPI:{set:function(a,e){if(e===b){return this.remove(a)}c.setItem(a,d.stringify(e));return e},setAll:function(a){var b,c;for(var d in a){c=a[d];if(this.set(d,c)!==c){b=true}}return b},get:function(a){return d.deserialize(c.getItem(a))},getAll:function(){var a={};this.forEach(function(b,c){a[b]=c});return a},clear:function(){return c.clear()},remove:function(a){var b=this.get(a);c.removeItem(a);return b},has:function(a){return c.hasOwnProperty(a)},keys:function(){var a=[];this.forEach(function(b,c){a.push(b)});return a},size:function(){return this.keys().length},forEach:function(a){for(var b=0;b<c.length;b++){var d=c.key(b);if(a(d,this.get(d))===false)break}}},deserialize:function(a){if(typeof a!=="string"){return b}try{return JSON.parse(a)}catch(c){return a||b}},isJSON:function(a){return typeof a==="object"&&Object.prototype.toString.call(a).toLowerCase()&&!a.length},stringify:function(a){return a===b||typeof a==="function"?a+"":JSON.stringify(a)}},e=function(a,c){var f=arguments,g=function(){if(d.isJSON(a))return e.setAll(a);if(f.length===0){return e.getAll()}if(c===false){return e.remove(a)}if(c!==b){return e.set(a,c)}if(a){return e.get(a)}return e.setAll(a,c)};return g(a,c)};for(var f in d.storageAPI)e[f]=d.storageAPI[f];return e});